<?xml version="1.0" encoding="UTF-8"?>
<tdml:testSuite suiteName="SimpleTypes" description="Section 5 - simple types"
	xmlns:tdml="http://www.ibm.com/xmlns/dfdl/testData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/" xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:ex="http://example.com">

  <tdml:defineSchema name="XPathFunctions">
    <dfdl:format ref="ex:daffodilTest1"/>

    <xs:element name="abs" type="xs:int" dfdl:inputValueCalc="{ fn:abs(-9) }"/>
    <xs:element xmlns:fn="http://www.w3.org/2005/xpath-functions" name="foo" type="xs:int" dfdl:inputValueCalc="{ fn:foo(-9) }"/>

  </tdml:defineSchema>

<!--
    Test Name: fn_not_declared
       Schema: Functions.dfdl.xsd
         Root: abs
      Purpose: This test demonstrates that tdml-embedded schemas don't include default namespaces. You have to put fn in them explicitly.
-->

	<tdml:parserTestCase name="fn_not_declared" root="abs"
		model="XPathFunctions" description="">

		<tdml:document>
			<tdml:documentPart type="text"></tdml:documentPart>
		</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>prefix</tdml:error>
      <tdml:error>fn:abs</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
<!--
    Test Name: fn_not_declared_2
       Schema: Functions-neg.dfdl.xsd
         Root: foo
      Purpose: This test demonstrates that if a function uses the fn prefix but the function is not defined,
               an SDE occurs.
-->

	<tdml:parserTestCase name="fn_not_declared_2" root="foo"
		model="XPathFunctions" description="">

		<tdml:document>
			<tdml:documentPart type="text"></tdml:documentPart>
		</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>Unsupported function</tdml:error>
      <tdml:error>fn:foo</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

</tdml:testSuite>
