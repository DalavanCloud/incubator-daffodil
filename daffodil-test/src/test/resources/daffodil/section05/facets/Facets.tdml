<?xml version="1.0" encoding="UTF-8"?>
<tdml:testSuite suiteName="FacetTests" description="Section 5 - facets"
  xmlns:tdml="http://www.ibm.com/xmlns/dfdl/testData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/" xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:ct="http://w3.ibm.com/xmlns/dfdl/ctInfoset" xmlns:ex="http://example.com">

  <!-- ===================================================================== 
    Schemas ======================================================================= -->

  <!--
    Schema name: facets-min0max0.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs is 0 and maxOccurs 
    is 0 in a simple one-element sequence
  -->

  <tdml:defineSchema name="facets-min0max0.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="implicit"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />

    <xs:complexType name="basicType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="0"
          maxOccurs="0" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="basic" type="basicType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>



  </tdml:defineSchema>

  <!--
    Schema name: facets-min1max1-scalar.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs is 1 and maxOccurs 
    is 1 in a simple one-element sequence
  -->

  <tdml:defineSchema name="facets-min1max1-scalar.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="implicit"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />

    <xs:complexType name="scalarType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="1"
          maxOccurs="1" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="scalar" type="scalarType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>


  </tdml:defineSchema>

  <!--
    Schema name: facets-min2max20-array.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs is 2 and maxOccurs 
    is 20 in a simple array
  -->

  <tdml:defineSchema name="facets-min2max20-array.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />


    <xs:element name="array" type="arrayType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="arrayType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="2"
          maxOccurs="20" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>


  </tdml:defineSchema>


  <!--
    Schema name: arrays-min0max5.dfdl.xsd
    Purpose: This schema tests the minOccurs of an array is 0 and maxOccurs 5
	Note: This is not the same as testing for min and max elements in an array.
  -->

  <tdml:defineSchema name="arrays-min0max5.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />

    <xs:element name="arrays" type="arrayOutter"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="arrayOutter">
      <xs:sequence dfdl:separator=",">
        <xs:element name="array" type="array" minOccurs="0"
          maxOccurs="5" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:complexType name="array">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="3"
          maxOccurs="20" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>


  </tdml:defineSchema>

  <!--
    Schema name: arrays-min1max5.dfdl.xsd
    Purpose: This schema tests the minOccurs of an array is 1 and maxOccurs 5
  -->

  <tdml:defineSchema name="arrays-min1max5.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />

    <xs:element name="arrays" type="arrayOutter"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="arrayOutter">
      <xs:sequence dfdl:separator=",">
        <xs:element name="array" type="array" minOccurs="1"
          maxOccurs="5" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:complexType name="array">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="3"
          maxOccurs="20" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>


  </tdml:defineSchema>

  <!--
    Schema name: arrays-min3max5.dfdl.xsd
    Purpose: This schema tests the minOccurs of an array is 3 and maxOccurs 5
  -->

  <tdml:defineSchema name="arrays-min3max5.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />

    <xs:element name="arrays" type="arrayOutter"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="arrayOutter">
      <xs:sequence dfdl:separator=",">
        <xs:element name="array" type="array" minOccurs="3"
          maxOccurs="5" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:complexType name="array">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="3"
          maxOccurs="20" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>


  </tdml:defineSchema>
  <!--
    Schema name: facets-min5max10.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs is 5 and maxOccurs 
    is 10 in a simple one-element sequence,
    where occursCountKind equals "parsed" and separatorPolicy is "suppressed"
  -->

  <tdml:defineSchema name="facets-min5max10.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />


    <xs:element name="basic" type="basicType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="basicType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="5"
          maxOccurs="10" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>


  </tdml:defineSchema>

  <!--
    Schema name: facets-min5max10-2.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs is 5 and maxOccurs 
    is 10 in a simple one-element sequence,
    with occursCountKind set to "implicit" and separatorPolicy set to "required"
  -->

  <tdml:defineSchema name="facets-min5max10-2.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="implicit"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />


    <xs:element name="basic" type="basicType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="basicType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int" minOccurs="5"
          maxOccurs="10" dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="basic" type="basicType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="root1">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="basic" type="basicType"
            dfdl:lengthKind="implicit" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

  </tdml:defineSchema>

  <!--
    Schema name: facets-min2max3-schemaErr.dfdl.xsd
    Purpose: This schema tests the condition that minOccurs does not match 
    maxOccurs when occursCountKind="fixed"
  -->

  <tdml:defineSchema name="facets-min2max3-schemaErr.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="fixed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />


    <xs:element name="basic" type="basicType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="basicType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int"
          dfdl:occursCountKind="fixed" minOccurs="2" maxOccurs="3"
          dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="basic" type="basicType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

  </tdml:defineSchema>

  <!--
    Schema name: facets-fixedUnboundedMax-schemaErr.dfdl.xsd
    Purpose: This schema tests the condition if maxOccurs is unbounded occursCountKind="fixed"
  -->

  <tdml:defineSchema name="facets-fixedUnboundedMax-schemaErr.dfdl.xsd">

    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="fixed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />

    <xs:element name="basic" type="basicType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="basicType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="data" type="xs:int"
          dfdl:occursCountKind="fixed" minOccurs="2" maxOccurs="unbounded"
          dfdl:textNumberRep="standard" dfdl:lengthKind="delimited" />
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="basic" type="basicType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>


  </tdml:defineSchema>

  <!--
    Schema name: facets-cell-min1max1.dfdl.xsd
    Purpose: This schema tests the condition that the minOccurs and maxOccurs 
    values are both 1 in a nested element (matrix->row->cell)
    Only one cell entry should be parsed.
  -->

  <tdml:defineSchema name="facets-cell-min1max1.dfdl.xsd">


    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="implicit"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="required" separatorPosition="infix" />


    <xs:element name="matrix" type="matrixType"
      dfdl:lengthKind="implicit" />

    <xs:complexType name="matrixType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="row" minOccurs="1" maxOccurs="5"
          dfdl:lengthKind="implicit">
          <xs:complexType>
            <xs:sequence dfdl:separator=",">
              <xs:element name="cell" type="xs:int"
                minOccurs="1" maxOccurs="1" dfdl:textNumberRep="standard"
                dfdl:lengthKind="delimited" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>

  </tdml:defineSchema>

  <!--
    Schema name: facets-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: This schema tests the condition that you must have a minimum 
    of 2 rows within a matrix.
  -->

  <tdml:defineSchema name="facets-rowcell-min2maxUnbounded.dfdl.xsd">


    <dfdl:format ref="ex:daffodilTest1" initiator=""
      terminator="" leadingSkip="0" trailingSkip="0" textBidi="no"
      floating="no" encoding="utf-8" byteOrder="bigEndian" alignment="1"
      alignmentUnits="bytes" fillByte="f" occursCountKind="parsed"
      truncateSpecifiedLengthString="no" ignoreCase="no" representation="text"
      lengthKind="delimited" nilValueDelimiterPolicy="both"
      emptyValueDelimiterPolicy="none"
      documentFinalTerminatorCanBeMissing="yes" initiatedContent="no"
      separatorPolicy="suppressed" separatorPosition="infix" />


    <xs:complexType name="matrixType">
      <xs:sequence dfdl:separator="|">
        <xs:element name="row" minOccurs="2" maxOccurs="unbounded"
          dfdl:lengthKind="implicit">
          <xs:complexType>
            <xs:sequence dfdl:separator=",">
              <xs:element name="cell" type="xs:int"
                minOccurs="2" maxOccurs="unbounded" dfdl:textNumberRep="standard"
                dfdl:lengthKind="delimited" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>

    <xs:element name="root">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="matrix" type="matrixType"
            dfdl:lengthKind="implicit" />
          <xs:element name="extra" type="xs:string"
            dfdl:lengthKind="delimited" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:element name="root1">
      <xs:complexType>
        <xs:sequence dfdl:separator="">
          <xs:element name="matrix" type="matrixType"
            dfdl:lengthKind="implicit" />
        </xs:sequence>
      </xs:complexType>
    </xs:element>

  </tdml:defineSchema>

  <!-- ===================================================================== 
    Tests ======================================================================== -->

  <!--
    Test name: correctNumCells0
    Schema: facets-min0max0.dfdl.xsd
    Purpose: This document has zero entries and should pass.
  -->

  <tdml:parserTestCase name="correctNumCells0" root="root"
    model="facets-min0max0.dfdl.xsd" description="Section 5 - minOccurs 0 maxOccurs 0 - DFDL-5-057R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <basic />
          <extra />
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <!--
    Test name: extraCellsParsed
    Schema: facets-min0max0.dfdl.xsd
    Purpose: This document has more than the maximum number of cells in a 
    row and should be parsed accordingly.
  -->

  <tdml:parserTestCase name="extraCellsParsed" root="root"
    model="facets-min0max0.dfdl.xsd" description="Section 5 - minOccurs 0 maxOccurs 0 - DFDL-5-061R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <basic></basic>
          <extra>1|2|3</extra>
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <!--
    Test name: scalarElements
    Schema: facets-min1max1-scalar.dfdl.xsd
    Purpose: This document has a single element and should be parsed accordingly.
  -->

  <tdml:parserTestCase name="scalarElements" root="root"
    model="facets-min1max1-scalar.dfdl.xsd" description="Section 5 - minOccurs 1 maxOccurs 1 - DFDL-5-057R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <scalar>
            <data>1</data>
          </scalar>
            <extra></extra>
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>
  
  <!--
    Test name: scalarElementsExtra
    Schema: facets-min1max1-scalar.dfdl.xsd
    Purpose: This document has more than a single element and should be parsed accordingly.
  -->

  <tdml:parserTestCase name="scalarElementsExtra" root="root"
    model="facets-min1max1-scalar.dfdl.xsd" description="Section 5 - minOccurs 1 maxOccurs 1 - DFDL-5-057R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <scalar>
            <data>1</data>
          </scalar>
          <extra>|2|3|4</extra>
        </root>        
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <!--
    Test name: lessThanMinBasic
    Schema: facets-min5max10.dfdl.xsd
    Purpose: This document has less than the minimum number of entries and 
    should fail parsing.
  -->

  <tdml:parserTestCase name="lessThanMinBasic" root="basic"
    model="facets-min5max10.dfdl.xsd" description="Section 5 - minOccurs 5 maxOccurs 10 - DFDL-5-062R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error />
    </tdml:errors>

  </tdml:parserTestCase>

  <!--
    Test name: moreThanMaxBasic
    Schema: facets-min5max10.dfdl.xsd
    Purpose: This document has more than the maximum number of entries but 
    maxOccurs should be ignored,
    because occursCountKind="parsed" and separatorPolicy is "suppressed"
  -->

  <tdml:parserTestCase name="moreThanMaxBasic" root="basic"
    model="facets-min5max10.dfdl.xsd" description="Section 5 - minOccurs 5 maxOccurs 10 - DFDL-5-062R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5|6|7|8|9|1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <basic>
          <data>1</data>
          <data>2</data>
          <data>3</data>
          <data>4</data>
          <data>5</data>
          <data>6</data>
          <data>7</data>
          <data>8</data>
          <data>9</data>
          <data>1</data>
          <data>2</data>
          <data>3</data>
          <data>4</data>
          <data>5</data>
        </basic>
      </tdml:dfdlInfoset>
    </tdml:infoset>


  </tdml:parserTestCase>

  <!--
    Test name: arrayElements
    Schema: facets-min2max20-array.dfdl.xsd
    Purpose: This document has an array of entries and should be correctly 
    parsed.
  -->

  <tdml:parserTestCase name="arrayElements" root="array"
    model="facets-min2max20-array.dfdl.xsd" description="Section 5 - minOccurs 5 maxOccurs 10 - DFDL-5-057R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5|6|7|8|9]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <array>
          <data>1</data>
          <data>2</data>
          <data>3</data>
          <data>4</data>
          <data>5</data>
          <data>6</data>
          <data>7</data>
          <data>8</data>
          <data>9</data>
        </array>
      </tdml:dfdlInfoset>
    </tdml:infoset>


  </tdml:parserTestCase>


  <!--
    Test name: upToMaxParsed
    Schema: facets-min5max10-2.dfdl.xsd
    Purpose: This document has more than the maximum number of entries but 
    should be parsed accordingly.
  -->

  <tdml:parserTestCase name="upToMaxParsed" root="root"
    model="facets-min5max10-2.dfdl.xsd" description="Section 5 - minOccurs 5 maxOccurs 10 - DFDL-5-061R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5|6|7|8|9|1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <basic>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
            <data>6</data>
            <data>7</data>
            <data>8</data>
            <data>9</data>
            <data>1</data>
          </basic>
          <extra>|2|3|4|5</extra>
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <!--
    Test name: minMaxDoNotMatch
    Schema: facets-min2max3-schemaErr.dfdl.xsd
    Purpose: This test verifies that when occursCountKind is "fixed", there 
    is a parsing error if minOccurs does
    not equal maxOccurs.
  -->

  <tdml:parserTestCase name="minMaxDoNotMatch" root="root"
    model="facets-min2max3-schemaErr.dfdl.xsd" description="Section 5 - minOccurs 2 maxOccurs 3 - DFDL-5-060R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5|6|7|8|9|1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>occursCountKind='fixed' requires minOccurs to equal maxOccurs</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
    Test name: fixedUnboundedMax
    Schema: facets-unboundedMax-schemaErr.dfdl.xsd
    Purpose: This test verifies that when occursCountKind is "fixed", there 
    is a parsing error if maxOccurs is unbounded.
  -->

  <tdml:parserTestCase name="fixedUnboundedMax"
    root="root" model="facets-fixedUnboundedMax-schemaErr.dfdl.xsd"
    description="Section 5 - minOccurs 2 maxOccurs 3 - DFDL-5-060R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[SDE]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error>fixed</tdml:error>
      <tdml:error>unbounded</tdml:error>
      <tdml:error>maxOccurs</tdml:error>
    </tdml:errors>


  </tdml:parserTestCase>

  <!--
    Test name: largeNumRows
    Schema: facet-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: This test set has a very high number of rows within the matrix 
    and should pass.
  -->

  <tdml:parserTestCase name="largeNumRows" root="root"
    model="facets-rowcell-min2maxUnbounded.dfdl.xsd" description="Section 5 - minOccurs 2 maxOccurs Unbounded - DFDL-5-061R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4|1,3|2,4|3,2,3,4,5,4|55,3,4,4]]></tdml:documentPart>

    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <matrix>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>2</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>5</cell>
              <cell>4</cell>
            </row>
            <row>
              <cell>55</cell>
              <cell>3</cell>
              <cell>4</cell>
              <cell>4</cell>
            </row>
          </matrix>
          <extra></extra>
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>


  <!--
    Test name: lessThanMinCells
    Schema: facets-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: This test set does not have the minimum number of cells (2) 
    in the second row and would be parsed accordingly,
    but in this case the number of rows would be less than 2, so there is 
    a parse error.
  -->

  <tdml:parserTestCase name="lessThanMinCells" root="root"
    model="facets-rowcell-min2maxUnbounded.dfdl.xsd" description="Section 5 - minOccurs 2 maxOccurs Unbounded - DFDL-5-058R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1,4,2,1|4|5,4,3]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error />
    </tdml:errors>

  </tdml:parserTestCase>


  <!--
    Test name: moreThanMinCells
    Schema: facets-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: This test set has the minimum number of cells and rows and should 
    pass.
  -->

  <tdml:parserTestCase name="moreThanMinCells" root="root"
    model="facets-rowcell-min2maxUnbounded.dfdl.xsd" description="Section 5 - minOccurs 2 maxOccurs Unbounded - DFDL-5-057R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1,3|3,1]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <matrix>
            <row>
              <cell>1</cell>
              <cell>3</cell>
            </row>
            <row>
              <cell>3</cell>
              <cell>1</cell>
            </row>
          </matrix>
          <extra></extra>
        </root>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>


  <!--
    Test name: lessThanMinCellsAfterLargeRow
    Schema: facets-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: This test set several rows containing a very high number of 
    cells, followed by a row with less than the minimum required, and should 
    be
    parsed accordingly.
  -->

  <tdml:parserTestCase name="lessThanMinCellsAfterLargeRow"
    root="root" model="facets-rowcell-min2maxUnbounded.dfdl.xsd"
    description="Section 5 - minOccurs 2 maxOccurs Unbounded - DFDL-5-058R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2|1|8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,22]]></tdml:documentPart>
    </tdml:document>


    <tdml:infoset>
      <tdml:dfdlInfoset>
        <root>
          <matrix>
            <row>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
              <cell>1</cell>
            </row>
            <row>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
              <cell>2</cell>
            </row>
          </matrix>
          <extra>|1|8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,22</extra>
        </root>

      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <!--
    Test name: leftOverData_Neg
    Schema: facets-min5max10-2.dfdl.xsd
    Purpose: A negative test to verify that left over data appears in the 
    diagnostic message for DFDL-277.
  -->

  <tdml:parserTestCase name="leftOverData_Neg" root="root1"
    model="facets-min5max10-2.dfdl.xsd"
    description="Section 16 occursCountKind=‘implicit’ means that the maxOccurs and minOccurs attributes of the element are used to bound speculative parsing. - DFDL-16-002R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5|6|7|8|9|1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error />
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
    Test name: lessThanMinCellsAfterLargeRow_Neg
    Schema: facets-rowcell-min2maxUnbounded.dfdl.xsd
    Purpose: A negative test satisfying the minimum of 2 rows followed by 
    a third row with number of cells less than minOccurs and followed by left 
    over data.
  -->

  <tdml:parserTestCase name="lessThanMinCellsAfterLargeRow_Neg"
    root="root1" model="facets-rowcell-min2maxUnbounded.dfdl.xsd"
    description="Section 5 - minOccurs 2 maxOccurs Unbounded - DFDL-5-062R">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2|1|8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,22]]></tdml:documentPart>
    </tdml:document>


    <tdml:errors>
      <tdml:error />
    </tdml:errors>

  </tdml:parserTestCase>

  <tdml:defineSchema name="pattern">
    <dfdl:format ref="ex:daffodilTest1" />

    <xs:element name="e1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:pattern value="[0-8]+" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    <xs:element name="e2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st1">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    <xs:element name="e3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st1">
          <xs:pattern value="1" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    <xs:element name="e4" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st4">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    <xs:element name="e5" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st6">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="e6" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st5">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    <xs:simpleType name="st1">
      <xs:restriction base="ex:st2">
        <xs:pattern value="[0-9]+" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st2">
      <xs:restriction base="ex:st3">
        <xs:pattern value="[0-9]{3}" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st3">
      <xs:restriction base="xs:string">
        <xs:pattern value="[0-9]*" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st4">
      <xs:restriction base="ex:st5">
        <xs:pattern value="6" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st5">
      <xs:restriction base="xs:string">
        <xs:pattern value="[0-5]" />
        <xs:pattern value="[7-9]" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st6">
      <xs:restriction base="ex:st7">
        <xs:pattern value=".*(a|e|i|o|u).*" />
      </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="st7">
      <xs:restriction base="xs:string">
        <xs:pattern value=".*(t|n).*" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="doc" dfdl:lengthKind="implicit">
      <xs:complexType>
        <xs:sequence dfdl:separator="," dfdl:terminator=";">
          <xs:element name="e1" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="e2" nillable="true" type="ex:st8"
            dfdl:lengthKind="delimited" dfdl:nilValueDelimiterPolicy="terminator"
            dfdl:nilValue="567 %ES;" dfdl:nilKind="literalValue">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>

    <xs:simpleType name="st8">
      <xs:restriction base="xs:string">
        <xs:pattern value="\d{1,2}" />
      </xs:restriction>
    </xs:simpleType>
  </tdml:defineSchema>

  <!--
    Test name: facetPattern01
    Schema: pattern
    Purpose: This document meets the constraints in the schema and should 
    pass
  -->

  <tdml:parserTestCase name="facetPattern01" root="e1"
    model="pattern">
    <!-- Tests basic pattern facet -->
    <tdml:document>6</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e1>6</e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <!--
    Test name: facetPattern02
    Schema: pattern
    Purpose: This passes because all of the patterns in the inherited types succeed.
    That is to say that patterns between simpleTypes are AND'd and patterns 
    within a simpleType are OR'd.
  -->

  <tdml:parserTestCase name="facetPattern02" root="e2"
    model="pattern">
    <tdml:document>123</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e2>123</e2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <!--
    Test name: facetPattern03
    Schema: pattern
    Purpose: This fails because the pattern "1" does not match value "123"
  -->

  <tdml:parserTestCase name="facetPattern03" root="e3"
    model="pattern">
    <tdml:document>123</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>


  <!--
    Test name: facetPattern04
    Schema: pattern
    Purpose: This document does not meet the constraints in the schema and 
    should fail
  -->

  <tdml:parserTestCase name="facetPattern04" root="e1"
    model="pattern">
    <!-- Tests basic pattern facet -->
    <tdml:document>9</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
    Test name: facetPattern05
    Schema: pattern
    Purpose: This test fails because while it meets at least one of the patterns within the base simple type, it must also
    meet the pattern in the inherited simpleType, and does not.
    That is to say that patterns between simpleTypes are AND'd and patterns 
    within a simpleType are OR'd.
  -->

  <tdml:parserTestCase name="facetPattern05" root="e4"
    model="pattern">
    <tdml:document>7</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
    test name: facetpattern06
    schema: pattern
    purpose: this test should fail because it does not meet either of the 
    assertions
  -->
  <tdml:parserTestCase name="facetPattern06" root="e5"
    model="pattern">
    <tdml:document>fly</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>

  <!--
    test name: facetpattern07
    schema: pattern
    purpose: this test should pass because it meets the assertions
  -->
  <tdml:parserTestCase name="facetPattern07" root="e5"
    model="pattern">
    <tdml:document>note</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ex:e5>note</ex:e5>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <!--
    test name: facetpattern08
    schema: pattern
    purpose: this test should fail because it does not meet one of the assertions
  -->
  <tdml:parserTestCase name="facetPattern08" root="e5"
    model="pattern">
    <tdml:document>note</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <ex:e5>note</ex:e5>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

  <!--
    Test name: facetPattern09
    Schema: pattern
    Purpose: This test
  -->

  <tdml:parserTestCase name="facetPattern09" root="doc"
    model="pattern">
    <tdml:document>123,567;</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <doc>
          <e1>123</e1>
          <e2 xsi:nil="true"></e2>
        </doc>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetPattern10
    Schema: pattern
    Purpose: This passes because at least one of the patterns within the simpleType succeeds. 
    That is to say that patterns between simpleTypes are AND'd and patterns 
    within a simpleType are OR'd.
  -->

  <tdml:parserTestCase name="facetPattern10" root="e6"
    model="pattern">
    <tdml:document>7</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e6>7</e6>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  

  <tdml:defineSchema name="lengthFacets">
    <dfdl:format ref="ex:daffodilTest1" representation="text"/>
    <xs:element name="e1" dfdl:lengthKind="implicit" dfdl:lengthUnits="bytes">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="10" />
          <xs:minLength value="10" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e2" dfdl:lengthKind="implicit" dfdl:lengthUnits="bytes">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="10" />
          <xs:minLength value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e3" dfdl:lengthKind="implicit" dfdl:lengthUnits="bytes">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="10" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4" dfdl:lengthKind="implicit" dfdl:lengthUnits="bytes">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="10" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e5" dfdl:lengthKind="implicit" dfdl:lengthUnits="bytes">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
  </tdml:defineSchema>
  
  <!--
    Test name: maxLength01
    Schema: lengthFacets
    Purpose: This test demonstrates the use of the maxLength facet with lengthKind = "implicit" 
  -->

  <tdml:parserTestCase name="maxLength01" root="e1"
    model="lengthFacets" description="Section 5 - maxLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">this is way too long</tdml:documentPart>
    </tdml:document>
    <tdml:errors>
      <tdml:error>Left over data</tdml:error>
    </tdml:errors>

  </tdml:parserTestCase>
  
  <!--
    Test name: maxLength02
    Schema: lengthFacets
    Purpose: This test uses an element with both minLength and maxLength defined for lengthKind="implicit"
             and should throw a schema definition error 
  -->

  <tdml:parserTestCase name="maxLength02" root="e2"
    model="lengthFacets" description="Section 5 - maxLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">invalid</tdml:documentPart>
    </tdml:document>
    <tdml:errors>
      <tdml:error>Schema Def</tdml:error>
    </tdml:errors>

  </tdml:parserTestCase>
  
  <!--
    Test name: maxLength03
    Schema: lengthFacets
    Purpose: This test demonstrates the use of the maxLength facet with lengthKind = "implicit" 
  -->

  <tdml:parserTestCase name="maxLength03" root="e1"
    model="lengthFacets" description="Section 5 - maxLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">twocatfish</tdml:documentPart>
    </tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e1>twocatfish</e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>

  </tdml:parserTestCase>

  <tdml:parserTestCase name="maxLength04" root="e3"
    model="lengthFacets" description="Section 5 - maxLength w/o minLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">invalid</tdml:documentPart>
    </tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>

  </tdml:parserTestCase>

  <tdml:parserTestCase name="maxLength05" root="e4"
    model="lengthFacets" description="Section 5 - minLength w/o maxLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">invalid</tdml:documentPart>
    </tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>

  </tdml:parserTestCase>

  <tdml:parserTestCase name="maxLength06" root="e5"
    model="lengthFacets" description="Section 5 - no min/maxLength when dfdl:lengthKind=”implicit” - DFDL-5-063R">

    <tdml:document>
      <tdml:documentPart type="text">invalid</tdml:documentPart>
    </tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>

  </tdml:parserTestCase>
  
  <tdml:defineSchema name="checkConstraints">
    <dfdl:format ref="ex:daffodilTest1" />
    <xs:element name="e1">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="cnt" type="xs:int"
            dfdl:lengthKind="delimited" />
          <xs:element name="a" minOccurs="0" maxOccurs="unbounded"
            dfdl:occursCountKind="expression" dfdl:occursCount="{ xs:int(../ex:cnt) }">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="v" type="xs:int"
                  dfdl:inputValueCalc="{ dfdl:checkConstraints(.) }" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    <xs:element name="e2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:pattern value="[0-9]+" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st1">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:st1">
          <xs:pattern value="1" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e5">
      <xs:complexType>
        <xs:sequence dfdl:initiatedContent="no"
          dfdl:separatorPosition="infix" dfdl:separator=",">
          <xs:element name="a" minOccurs="0" maxOccurs="3"
            type="xs:int" dfdl:occursCountKind="implicit" dfdl:lengthKind="delimited"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    <xs:element name="e6">
      <xs:complexType>
        <xs:sequence dfdl:initiatedContent="no"
          dfdl:separatorPosition="infix" dfdl:separator=",">
          <xs:element name="a" minOccurs="0" maxOccurs="unbounded"
            type="xs:int" dfdl:occursCountKind="parsed" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    <xs:simpleType name="st1">
      <xs:restriction base="ex:st2">
        <xs:pattern value="[0-9]+" />
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="st2">
      <xs:restriction base="ex:st3">
        <xs:pattern value="[0-9]{3}" />
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="st3">
      <xs:restriction base="xs:string">
        <xs:pattern value="[0-9]*" />
      </xs:restriction>
    </xs:simpleType>
  </tdml:defineSchema>
  
  <!--
    Test name: checkMaxOccurs_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxOccurs facet. In this case the test passes validation.
  -->

  <tdml:parserTestCase name="checkMaxOccurs_Pass"
    root="e5" model="checkConstraints">

    <tdml:document>1,2,3</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e5>
          <a>1</a>
          <a>2</a>
          <a>3</a>
        </e5>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMaxOccurs_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxOccurs facet. In this case the test fails validation.
  -->

  <tdml:parserTestCase name="checkMaxOccurs_Fail"
    root="e5" model="checkConstraints">

    <tdml:document>1,2,3,4,5,6,7</tdml:document>
      <tdml:errors>
      <tdml:error/>
      </tdml:errors>
  </tdml:parserTestCase>

  <tdml:parserTestCase name="checkMaxOccursUnbounded_Pass"
    root="e6" model="checkConstraints">

    <tdml:document>1,2,3</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e6>
          <a>1</a>
          <a>2</a>
          <a>3</a>
        </e6>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>


  <!--
    Test name: ArrayMinOccurs{$foo}
    Schema: arrays-min3max5.dfdl.xsd
    Purpose: This document has 4 arrays of entries which is within the expected range
     as such it should parse
  -->

  <tdml:parserTestCase name="arraysMinOccursZero" root="arrays"
    model="arrays-min0max5.dfdl.xsd" description="Section 5 - minOccurs 0 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays></arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <tdml:parserTestCase name="arraysOccursInRange_01" root="arrays"
    model="arrays-min0max5.dfdl.xsd" description="Section 5 - minOccurs 0 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays>
          <array>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
          </array>
        </arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <tdml:parserTestCase name="arraysOccursInRange_02" root="arrays"
    model="arrays-min0max5.dfdl.xsd" description="Section 5 - minOccurs 0 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5,11|22|33|44|55]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays>
          <array>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
          </array>
          <array>
            <data>11</data>
            <data>22</data>
            <data>33</data>
            <data>44</data>
            <data>55</data>
          </array>
        </arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>


    <tdml:parserTestCase name="arraysOccursInRange_03" root="arrays"
    model="arrays-min1max5.dfdl.xsd" description="Section 5 - minOccurs 1 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays>
          <array>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
          </array>
        </arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
      <tdml:parserTestCase name="arraysOccursInRange_04" root="arrays"
    model="arrays-min1max5.dfdl.xsd" description="Section 5 - minOccurs 1 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5,11|22|33|44|55]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays>
          <array>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
          </array>
          <array>
            <data>11</data>
            <data>22</data>
            <data>33</data>
            <data>44</data>
            <data>55</data>
          </array>
        </arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>

      <tdml:parserTestCase name="arraysOccursOutOfRange_01" root="arrays"
    model="arrays-min1max5.dfdl.xsd" description="Section 5 - minOccurs 1 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error />
    </tdml:errors>
  </tdml:parserTestCase>
  
  
      <tdml:parserTestCase name="arraysOccursInRange_05" root="arrays"
    model="arrays-min3max5.dfdl.xsd" description="Section 5 - minOccurs 3 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5,11|22|33|44|55,111|222|333|444|555,1111|2222|3333|4444|5555,11111|22222|33333|44444|55555]]></tdml:documentPart>
    </tdml:document>

    <tdml:infoset>
      <tdml:dfdlInfoset>
        <arrays>
          <array>
            <data>1</data>
            <data>2</data>
            <data>3</data>
            <data>4</data>
            <data>5</data>
          </array>
          <array>
            <data>11</data>
            <data>22</data>
            <data>33</data>
            <data>44</data>
            <data>55</data>
          </array>
          <array>
            <data>111</data>
            <data>222</data>
            <data>333</data>
            <data>444</data>
            <data>555</data>
          </array>
          <array>
            <data>1111</data>
            <data>2222</data>
            <data>3333</data>
            <data>4444</data>
            <data>5555</data>
          </array>
          <array>
            <data>11111</data>
            <data>22222</data>
            <data>33333</data>
            <data>44444</data>
            <data>55555</data>
          </array>     
        </arrays>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <tdml:parserTestCase name="arraysOccursOutOfRange_02" root="arrays"
    model="arrays-min3max5.dfdl.xsd" description="Section 5 - minOccurs 3 maxOccurs 5 - DFDL-5-058R2">

    <tdml:document>
      <tdml:documentPart type="text"><![CDATA[1|2|3|4|5]]></tdml:documentPart>
    </tdml:document>

    <tdml:errors>
      <tdml:error />
    </tdml:errors>
  </tdml:parserTestCase>  
  
  <tdml:defineSchema name="TestFacets">
    <dfdl:format ref="ex:daffodilTest1" />
    <xs:element name="e1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="4" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e2_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minLength value="4" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="4" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e3_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:maxLength value="4" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e2_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:stMinLength_1">
          <xs:minLength value="2" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e3_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:stMaxLength_2">
          <xs:maxLength value="1" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:totalDigits value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_1_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:decimal">
          <xs:totalDigits value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_1_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:decimal">
          <xs:totalDigits value="5" />
          <xs:fractionDigits value="2"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:decimal">
          <xs:fractionDigits value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minInclusive value="-5" />
          <xs:maxInclusive value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_3_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minInclusive value="-2147483648" />
          <xs:maxInclusive value="2147483647" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_3_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minInclusive value="-2147483648" />
          <xs:maxInclusive value="2147483649" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_3_3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minInclusive value="-2147483649" />
          <xs:maxInclusive value="2147483647" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_4_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:minExclusive value="-5" />
          <xs:maxExclusive value="5" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_5_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:stValue250to500">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_6_1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:enumeration value="RED"/>
          <xs:enumeration value="BLUE"/>
          <xs:enumeration value="GREEN"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="e4_6_2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:stWeekend" />
      </xs:simpleType>
    </xs:element>
    <xs:element name="dateTimeImp" dfdl:calendarPatternKind="implicit" 
      dfdl:lengthKind="explicit" dfdl:length="19">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:dateTime">
          <xs:maxInclusive value="2013-03-24T03:45:30-00:00"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    
    <xs:simpleType name="stWeekend">
      <xs:restriction base="ex:stWeekdays">
        <xs:enumeration value="SATURDAY"/>
        <xs:enumeration value="SUNDAY"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stWeekdays">
      <xs:restriction base="xs:string">
        <xs:enumeration value="MONDAY"/>
        <xs:enumeration value="TUESDAY"/>
        <xs:enumeration value="WEDNESDAY"/>
        <xs:enumeration value="THURSDAY"/>
        <xs:enumeration value="FRIDAY"/>
        <xs:enumeration value="SATURDAY"/>
        <xs:enumeration value="SUNDAY"/>
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="stValue250to500">
      <xs:restriction base="ex:stValue0to10000">
        <xs:minInclusive value="250" />
        <xs:maxInclusive value="500"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stValue0to10000">
      <xs:restriction base="ex:stLength5">
        <xs:minInclusive value="0" />
        <xs:maxInclusive value="1000"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stLength5">
      <xs:restriction base="ex:stLength10">
        <xs:totalDigits value="5"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stLength10">
      <xs:restriction base="xs:int">
        <xs:totalDigits value="10"/>
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="stMinLength_1">
      <xs:restriction base="xs:string">
        <xs:minLength value="1" />
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stMaxLength_2">
      <xs:restriction base="xs:string">
        <xs:maxLength value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="stTotalDigits_1">
      <xs:restriction base="xs:integer">
        <xs:maxLength value="1" />
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="stFractionDigits_2">
      <xs:restriction base="xs:integer">
        <xs:maxLength value="2" />
      </xs:restriction>
    </xs:simpleType>
    
  </tdml:defineSchema>
  
   <!--
    Test name: checkMinLength_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test passes validation.
  -->
  <tdml:parserTestCase name="checkMinLength_Pass"
    root="e1" model="TestFacets">

    <tdml:document>abc</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e1>abc</e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
     <!--
    Test name: checkMinLength_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test fails validation.
  -->
  <tdml:parserTestCase name="checkMinLength_Fail"
    root="e2" model="TestFacets">

    <tdml:document>abc</tdml:document>
    <tdml:errors>
     <tdml:error>Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMinLength_Fail_NotString
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test fails validation.
  -->
  <tdml:parserTestCase name="checkMinLength_Fail_NotString"
    root="e2_1" model="TestFacets">

    <tdml:document>12345</tdml:document>
    <tdml:errors>
     <tdml:error>Schema Definition Error</tdml:error>
     <tdml:error>MinLength facet can only be applied to string or hexBinary.</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMinLength_Fail_Combining
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test fails validation.
               Specifically we're verifying that the combining of minLengthBase(1) and minLengthLocal(2) that minLengthLocal wins.
  -->
  <tdml:parserTestCase name="checkMinLength_Fail_Combining"
    root="e2_2" model="TestFacets">

    <tdml:document>1</tdml:document>
    <tdml:errors>
     <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMinLength_Pass_Combining
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test pass validation.
               Specifically we're verifying that the combining of minLengthBase(1) and minLengthLocal(2) that minLengthLocal wins.
  -->
  <tdml:parserTestCase name="checkMinLength_Pass_Combining"
    root="e2_2" model="TestFacets">

    <tdml:document>12</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e2_2>12</e2_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMaxLength_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxLength facet. In this case the test passes validation.
  -->
  <tdml:parserTestCase name="checkMaxLength_Pass"
    root="e3" model="TestFacets">

    <tdml:document>abc</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e3>abc</e3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkMaxLength_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxLength facet. In this case the test fails validation.
  -->
  <tdml:parserTestCase name="checkMaxLength_Fail"
    root="e3" model="TestFacets">

    <tdml:document>abcde</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMaxLength_Fail_NotString
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxLength facet. In this case the test fails validation.
  -->
  <tdml:parserTestCase name="checkMaxLength_Fail_NotString"
    root="e3_1" model="TestFacets">

    <tdml:document>12345</tdml:document>
    <tdml:errors>
      <tdml:error>MaxLength facet can only be applied to string or hexBinary.</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMinLength_Fail_Combining
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the minLength facet. In this case the test fails validation.
               Specifically we're verifying that the combining of maxLengthBase(2) and maxLengthLocal(1) that maxLengthLocal wins.
  -->
  <tdml:parserTestCase name="checkMaxLength_Fail_Combining"
    root="e3_2" model="TestFacets">

    <tdml:document>12</tdml:document>
    <tdml:errors>
     <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMaxLength_Pass_Combining
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxLength facet. In this case the test pass validation.
               Specifically we're verifying that the combining of maxLengthBase(2) and maxLengthLocal(1) that maxLengthLocal wins.
  -->
  <tdml:parserTestCase name="checkMaxLength_Pass_Combining"
    root="e3_2" model="TestFacets">

    <tdml:document>1</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e3_2>1</e3_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkTotalDigits_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the totalDigits facet.
  -->
  <tdml:parserTestCase name="checkTotalDigits_Pass"
    root="e4_1" model="TestFacets">

    <tdml:document>12345</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_1>12345</e4_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkTotalDigits_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the totalDigits facet.
               Fails here because expected 5 digits and received 6.
  -->
  <tdml:parserTestCase name="checkTotalDigits_Fail"
    root="e4_1" model="TestFacets">

    <tdml:document>123456</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkFractionDigits_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the fractionDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkFractionDigits_Pass"
    root="e4_2" model="TestFacets">

    <tdml:document>0.12345</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_2>0.12345</e4_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkFractionDigits_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the fractionDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkFractionDigits_Fail"
    root="e4_2" model="TestFacets">

    <tdml:document>0.123456</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkFractionDigits_Pass_LessDigits
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the fractionDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkFractionDigits_Pass_LessDigits"
    root="e4_2" model="TestFacets">

    <tdml:document>0.1234</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_2>0.1234</e4_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
   <!--
    Test name: checkTotalDigits_Pass_Decimal
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the totalDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkTotalDigits_Pass_Decimal"
    root="e4_1_1" model="TestFacets">

    <tdml:document>0.12345</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_1_1>0.12345</e4_1_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkTotalDigits_Fail_Decimal
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the totalDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkTotalDigits_Fail_Decimal"
    root="e4_1_1" model="TestFacets">

    <tdml:document>9.12345</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkTotalDigitsFractionDigits_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the fractionDigits and totalDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkTotalDigitsFractionDigits_Pass"
    root="e4_1_2" model="TestFacets">

    <tdml:document>123.01</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_1_2>123.01</e4_1_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkTotalDigitsFractionDigits_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the fractionDigits and totalDigits facet.
               Note that this test will not work until decimal is implemented.
  -->
  <tdml:parserTestCase name="checkTotalDigitsFractionDigits_Fail"
    root="e4_1_2" model="TestFacets">

    <tdml:document>123.010</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkMinInclusive_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
  -->
  <tdml:parserTestCase name="checkMinInclusive_Pass"
    root="e4_3" model="TestFacets">

    <tdml:document>-5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_3>-5</e4_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMaxInclusive_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
  -->
  <tdml:parserTestCase name="checkMaxInclusive_Pass"
    root="e4_3" model="TestFacets">

    <tdml:document>5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_3>5</e4_3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMinInclusive_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
               Specifically will fial because -6 is more negative than -5
  -->
  <tdml:parserTestCase name="checkMinInclusive_Fail"
    root="e4_3" model="TestFacets">

    <tdml:document>-6</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMaxInclusive_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
               Specifically will fail because 6 is greater than 5.
  -->
  <tdml:parserTestCase name="checkMaxInclusive_Fail"
    root="e4_3" model="TestFacets">

    <tdml:document>6</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkMaxInclusive_Pass_MaxInt
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
               Specifically this passes because the value is inside value-space of Int
  -->
  <tdml:parserTestCase name="checkMaxInclusive_Pass_MaxInt"
    root="e4_3_1" model="TestFacets">

    <tdml:document>5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_3_1>5</e4_3_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
        <!--
    Test name: checkMaxInclusive_Fail_MaxInt
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
               Specifically this fails because the value is outside value-space of Int
  -->
  <tdml:parserTestCase name="checkMaxInclusive_Fail_MaxInt"
    root="e4_3_2" model="TestFacets">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>maxInclusive facet value (2147483649) was found to be outside of Int range.</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
          <!--
    Test name: checkMinInclusive_Fail_MinInt
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
               Specifically this fails because the value is outside value-space of Int
  -->
  <tdml:parserTestCase name="checkMinInclusive_Fail_MinInt"
    root="e4_3_3" model="TestFacets">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>minInclusive facet value (-2147483649) was found to be outside of Int range.</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMinExclusive_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
  -->
  <tdml:parserTestCase name="checkMinExclusive_Fail"
    root="e4_4_1" model="TestFacets">

    <tdml:document>-5</tdml:document>
    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMaxExclusive_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxInclusive facet.
  -->
  <tdml:parserTestCase name="checkMaxExclusive_Fail"
    root="e4_4_1" model="TestFacets">

    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkMinExclusive_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxExclusive facet.
  -->
  <tdml:parserTestCase name="checkMinExclusive_Pass"
    root="e4_4_1" model="TestFacets">

    <tdml:document>-4</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_4_1>-4</e4_4_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkMaxExclusive_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the maxExclusive facet.
  -->
  <tdml:parserTestCase name="checkMaxExclusive_Pass"
    root="e4_4_1" model="TestFacets">

    <tdml:document>4</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_4_1>4</e4_4_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: checkCombining_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               max/minInclusive, max/minLength and totalDigits facets.
  -->
  <tdml:parserTestCase name="checkCombining_Pass"
    root="e4_5_1" model="TestFacets">

    <tdml:document>250</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_5_1>250</e4_5_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
   <!--
    Test name: checkCombining_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               max/minInclusive, max/minLength and totalDigits facets.
  -->
  <tdml:parserTestCase name="checkCombining_Fail"
    root="e4_5_1" model="TestFacets">

    <tdml:document>501</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkCombining_Fail_1
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               max/minInclusive, max/minLength and totalDigits facets.
  -->
  <tdml:parserTestCase name="checkCombining_Fail_1"
    root="e4_5_1" model="TestFacets">

    <tdml:document>1</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
    <!--
    Test name: checkEnumeration_Pass
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               enumeration facet.
  -->
  <tdml:parserTestCase name="checkEnumeration_Pass"
    root="e4_6_1" model="TestFacets">

    <tdml:document>RED</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_6_1>RED</e4_6_1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkEnumeration_Fail
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               enumeration facet.
  -->
  <tdml:parserTestCase name="checkEnumeration_Fail"
    root="e4_6_1" model="TestFacets">

    <tdml:document>YELLOW</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkEnumeration_Pass_Subset
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               enumeration facet.
  -->
  <tdml:parserTestCase name="checkEnumeration_Pass_Subset"
    root="e4_6_2" model="TestFacets">

    <tdml:document>SATURDAY</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <e4_6_2>SATURDAY</e4_6_2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
      <!--
    Test name: checkEnumeration_Fail_Subset
       Schema: checkConstraints
      Purpose: This test demonstrates the use of validation for the 
               enumeration facet.
  -->
  <tdml:parserTestCase name="checkEnumeration_Fail_Subset"
    root="e4_6_2" model="TestFacets">

    <tdml:document>MONDAY</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
     Test Name: checkMaxInclusive_Pass_DateTime
        Schema: TestFacets
          Root: dateTimeImp
       Purpose: This test demonstrates MaxInclusive facet works with DateTime.
-->
  
  <tdml:parserTestCase name="checkMaxInclusive_Pass_DateTime" root="dateTimeImp"
    model="TestFacets" description="Section 13 Simple Types - calendarPatternKind - DFDL-13-138R">

    <tdml:document><![CDATA[2013-03-24T03:45:30]]></tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <dateTimeImp>2013-03-24T03:45:30Z</dateTimeImp>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
    <!--
     Test Name: checkMaxInclusive_Fail_DateTime
        Schema: TestFacets
          Root: dateTimeImp
       Purpose: This test demonstrates MaxInclusive facet works with DateTime.
                Specifically this test fails because the DateTime exceeds the
                value specified by the facet.
-->
  
  <tdml:parserTestCase name="checkMaxInclusive_Fail_DateTime" root="dateTimeImp"
    model="TestFacets" description="Section 13 Simple Types - calendarPatternKind - DFDL-13-138R">

    <tdml:document><![CDATA[2014-03-24T03:45:30]]></tdml:document>
    <tdml:errors>
     <tdml:error>Assertion failed. Assertion failed for dfdl:checkConstraints(.)</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:defineSchema name="enumSchema">
    <dfdl:format ref="ex:daffodilTest1" />

    <xs:simpleType name="enum_st1">
      <xs:restriction base="xs:string">
        <xs:enumeration value="Trout" />
        <xs:enumeration value="Bass" />
        <xs:enumeration value="Catfish" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="enum_st2">
      <xs:restriction base="xs:int">
        <xs:enumeration value="Not" />
        <xs:enumeration value="An" />
        <xs:enumeration value="Int" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="enum_st3">
      <xs:restriction base="xs:int">
        <xs:enumeration value="2" />
        <xs:enumeration value="4" />
        <xs:enumeration value="6" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="enum_st4">
      <xs:restriction base="ex:enum_st1">
        <xs:enumeration value="Trout" />
        <xs:enumeration value="Bass" />
        <xs:enumeration value="Carp" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="enum_st5">
      <xs:restriction base="ex:enum_st1">
        <xs:enumeration value="Bass" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="enum_st6">
      <xs:restriction base="xs:string">
        <xs:enumeration value="Dalmation" />
        <xs:enumeration value="Dalmation" />
        <xs:enumeration value="Dalmation" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="enum_e1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st1">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="enum_e2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st3">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="enum_e3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st4">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="enum_e4" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st5">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="enum_e5" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st2">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="enum_e6" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:enum_st6">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
  
  </tdml:defineSchema>

  <!--
    Test name: facetEnum01
    Schema: enumSchema 
    Purpose: This test fails because the document does not match one of the enumeration values.
  -->

  <tdml:parserTestCase name="facetEnum01" root="enum_e1"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Bluegill</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum02
    Schema: enumSchema 
    Purpose: This test fails because the document does not match one of the enumeration values (case sensitive).
  -->

  <tdml:parserTestCase name="facetEnum02" root="enum_e1"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>TROUT</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum03
    Schema: enumSchema 
    Purpose: This test passes because the document matches one of the enumeration values (case sensitive).
  -->

  <tdml:parserTestCase name="facetEnum03" root="enum_e1"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Catfish</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <enum_e1>Catfish</enum_e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum04
    Schema: enumSchema 
    Purpose: This test passes because the document matches one of the enumeration values.
  -->

  <tdml:parserTestCase name="facetEnum04" root="enum_e2"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>2</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <enum_e2>2</enum_e2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum05
    Schema: enumSchema 
    Purpose: This test fails because the value is not a member of the base type's enumerations
  -->

  <tdml:parserTestCase name="facetEnum05" root="enum_e4"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Catfish</tdml:document>
    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum06
    Schema: enumSchema 
    Purpose: This test fails because the inheriting enumeration is not a subset of the base value.
  -->

  <tdml:parserTestCase name="facetEnum06" root="enum_e3"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Carp</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>Local enumerations must be a subset of base enumerations</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum07
    Schema: enumSchema 
    Purpose: This test fails because the enum values do not match the data type
  -->

  <tdml:parserTestCase name="facetEnum07" root="enum_e5"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Not</tdml:document>
    <tdml:errors>
      <tdml:error></tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: facetEnum08
    Schema: enumSchema 
    Purpose: This test fails because the enum values are not unique
  -->

  <tdml:parserTestCase name="facetEnum08" root="enum_e6"
    model="enumSchema" description="Section 5 - Facets - enumeration - DFDL-5-054R">
    <tdml:document>Dalmation</tdml:document>
    <tdml:errors>
      <tdml:error>Enumerations must be unique</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:defineSchema name="minMaxInExSchema">
    <dfdl:format ref="ex:daffodilTest1" />

    <xs:simpleType name="mImE_st1">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="3" />
        <xs:maxInclusive value="5" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st2">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="3" />
        <xs:maxExclusive value="5" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st3">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="3" />
        <xs:minExclusive value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st4">
      <xs:restriction base="xs:int">
        <xs:maxExclusive value="10" />
        <xs:maxInclusive value="10" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st5">
      <xs:restriction base="xs:int">
        <xs:minExclusive value="2" />
        <xs:maxInclusive value="10" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st6">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="10" />
        <xs:maxInclusive value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st7">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="5" />
        <xs:maxInclusive value="5" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st8">
      <xs:restriction base="xs:short">
        <xs:minInclusive value="1" />
        <xs:maxInclusive value="33000" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st9">
      <xs:restriction base="xs:short">
        <xs:minInclusive value="-10" />
        <xs:maxInclusive value="10" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st10">
      <xs:restriction base="xs:int">
        <xs:minInclusive value="5" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st11">
      <xs:restriction base="xs:int">
        <xs:maxExclusive value="5" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st12">
      <xs:restriction base="xs:int">
        <xs:minInclusive value=".5" />
        <xs:maxInclusive value="1" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st13">
      <xs:restriction base="xs:date">
        <xs:minInclusive value="2000-01-01" />
        <xs:maxInclusive value="2014-01-01" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="mImE_st14">
      <xs:restriction base="xs:time">
        <xs:minInclusive value="09:00:00+01:00" />
        <xs:maxInclusive value="15:00:00+01:00" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="mImE_e1">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="10" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st1">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e2">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="6" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st2">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e3">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="3" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st3">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e4">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="3" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st4">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e5">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="6" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st5">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
          
    <xs:element name="mImE_e6" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st6">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e7" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st7">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e8" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st8">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e9" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st9">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e10">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="3" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st10">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e11">
      <xs:complexType>
        <xs:sequence dfdl:separator=",">
          <xs:element name="f1" maxOccurs="3" dfdl:lengthKind="delimited">
            <xs:annotation>
              <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
                <dfdl:assert test="{ dfdl:checkConstraints(.) }"
                  message="Assertion failed for dfdl:checkConstraints(.)" />
              </xs:appinfo>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="ex:mImE_st11">
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
    
    <xs:element name="mImE_e12" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st12">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e13" dfdl:calendarCheckPolicy="lax" dfdl:calendarPatternKind="explicit" dfdl:calendarPattern="'Today is the 'dd'th day of 'MMM', year 'YYYY" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st13">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:element name="mImE_e14" dfdl:calendarCheckPolicy="lax" dfdl:calendarPatternKind="explicit" dfdl:calendarPattern="hh:mm:ss" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:mImE_st14">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>

    </tdml:defineSchema>
  
  <!--
    Test name: minMaxInEx01
    Schema: minMaxInExSchema 
    Purpose: This test passes because the values are within the values for minInclusive maxInclusive
  -->

  <tdml:parserTestCase name="minMaxInEx01" root="mImE_e1"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e1>
          <f1>3</f1>
          <f1>4</f1>
          <f1>5</f1>
        </mImE_e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx02
    Schema: minMaxInExSchema 
    Purpose: This test fails because a value is not within the values for minInclusive maxInclusive
  -->

  <tdml:parserTestCase name="minMaxInEx02" root="mImE_e1"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5,6,7</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx03
    Schema: minMaxInExSchema 
    Purpose: This test passes because the values are within the values for minInclusive maxExclusive
  -->

  <tdml:parserTestCase name="minMaxInEx03" root="mImE_e2"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e2>
          <f1>3</f1>
          <f1>4</f1>
        </mImE_e2>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx04
    Schema: minMaxInExSchema 
    Purpose: This test fails because a value is not within the values for minInclusive maxExclusive
  -->

  <tdml:parserTestCase name="minMaxInEx04" root="mImE_e2"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx05
    Schema: minMaxInExSchema 
    Purpose: This test fails because there is a value specified for both minInclusive and minExclusive
  -->

  <tdml:parserTestCase name="minMaxInEx05" root="mImE_e3"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>MinInclusive and MinExclusive cannot be specified for the same simple type</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx06
    Schema: minMaxInExSchema 
    Purpose: This test fails because there is a value specified for both maxInclusive and maxExclusive
  -->

  <tdml:parserTestCase name="minMaxInEx06" root="mImE_e4"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
      <tdml:error>MaxInclusive and MaxExclusive cannot be specified for the same simple type</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx07
    Schema: minMaxInExSchema 
    Purpose: This test passes because the values fall within the values of minExclusive and maxInclusive
  -->

  <tdml:parserTestCase name="minMaxInEx07" root="mImE_e5"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5,6,7,8</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e5>
          <f1>3</f1>
          <f1>4</f1>
          <f1>5</f1>
          <f1>6</f1>
          <f1>7</f1>
          <f1>8</f1>
        </mImE_e5>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx08
    Schema: minMaxInExSchema 
    Purpose: This test fails because max is less than min.
  -->

  <tdml:parserTestCase name="minMaxInEx08" root="mImE_e5"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,2,8</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx08
    Schema: minMaxInExSchema 
    Purpose: This test fails because minInclusive is higher than maxInclusive
  -->

  <tdml:parserTestCase name="minMaxInEx08" root="mImE_e6"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,4,5</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx09
    Schema: minMaxInExSchema 
    Purpose: This test passes because the value falls within min and max Inclusive
  -->

  <tdml:parserTestCase name="minMaxInEx09" root="mImE_e7"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e7>5</mImE_e7>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx10
    Schema: minMaxInExSchema 
    Purpose: This test fails because the value of maxInclusive is not within the range of the type xs:short
  -->

  <tdml:parserTestCase name="minMaxInEx10" root="mImE_e8"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>5</tdml:document>
    <tdml:errors>
      <tdml:error>maxInclusive facet value (33000) was found to be outside of Short range</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx11
    Schema: minMaxInExSchema 
    Purpose: This test passes because the value falls between the specified min and max.
  -->

  <tdml:parserTestCase name="minMaxInEx11" root="mImE_e9"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>-5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e9>-5</mImE_e9>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx12
    Schema: minMaxInExSchema 
    Purpose: This test passes because the values are >= minInclusive.
  -->

  <tdml:parserTestCase name="minMaxInEx12" root="mImE_e10"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>8,7,5</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e10>
          <f1>8</f1>
          <f1>7</f1>
          <f1>5</f1>
        </mImE_e10>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx13
    Schema: minMaxInExSchema 
    Purpose: This test passes because the values are < maxExclusive.
  -->

  <tdml:parserTestCase name="minMaxInEx13" root="mImE_e11"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,1,2</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e11>
          <f1>3</f1>
          <f1>1</f1>
          <f1>2</f1>
        </mImE_e11>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx14
    Schema: minMaxInExSchema 
    Purpose: This test fails because not all of the values are < maxExclusive.
  -->

  <tdml:parserTestCase name="minMaxInEx14" root="mImE_e11"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>3,5,1</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInEx15
    Schema: minMaxInExSchema 
    Purpose: This test fails because the value of maxInclusive is not a valid int
  -->

  <tdml:parserTestCase name="minMaxInEx15" root="mImE_e12"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>.75</tdml:document>
    <tdml:errors>
      <tdml:error>Schema Definition Error</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime01
    Schema: minMaxInExSchema 
    Purpose: This test passes because the date falls within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime01" root="mImE_e13"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>Today is the 16th day of March, year 2012</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e13>2012-03-16</mImE_e13>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime02
    Schema: minMaxInExSchema 
    Purpose: This test fails because the date does not fall within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime02" root="mImE_e13"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>Today is the 20th day of June, year 1999</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime03
    Schema: minMaxInExSchema 
    Purpose: This test fails because the date does not fall within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime03" root="mImE_e13"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>Today is the 40th day of December, year 2013</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime04
    Schema: minMaxInExSchema 
    Purpose: This test passes because the time falls within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime04" root="mImE_e14"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>11:00:00</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <mImE_e14>11:00:00Z</mImE_e14>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime05
    Schema: minMaxInExSchema 
    Purpose: This test fails because the time does not fall within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime05" root="mImE_e14"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>21:00:00</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: minMaxInExdateTime06
    Schema: minMaxInExSchema 
    Purpose: This test fails because the time does not fall within the specified range
  -->

  <tdml:parserTestCase name="minMaxInExdateTime06" root="mImE_e14"
    model="minMaxInExSchema" description="Section 5 - Facets - min/max In/Exclusive - DFDL-5-055R">
    <tdml:document>14:70:00</tdml:document>
    <tdml:errors>
      <tdml:error>Assertion</tdml:error>
      <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
    </tdml:errors>
  </tdml:parserTestCase>
  <tdml:defineSchema name="totalDigitsSchema">
    <dfdl:format ref="ex:daffodilTest1" />

    <xs:simpleType name="tD_st1">
      <xs:restriction base="xs:decimal">
        <xs:totalDigits value="3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="tD_e1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:tD_st1">
        </xs:restriction>
      </xs:simpleType>
  </xs:element>
<!--  
    <xs:simpleType name="tD_st2">
      <xs:restriction>
        <xs:totalDigits value="-3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="tD_e2" type="xs:float" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:tD_st2">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
 
    <xs:simpleType name="tD_st3">
      <xs:restriction>
        <xs:totalDigits value=".3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="tD_e3" type="xs:float" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:tD_st3">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
-->    
    <xs:simpleType name="tD_st4">
      <xs:restriction base="xs:int">
        <xs:totalDigits value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="tD_e4" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:tD_st4">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:simpleType name="tD_st4b">
      <xs:restriction>
        <xs:totalDigits value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="tD_e4b" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:tD_st4b">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
  
  </tdml:defineSchema>
  
  <!--
    Test name: totalDigits01
    Schema: totalDigitsSchema 
    Purpose: This test should pass because the number of digits adheres to the totalDigits facet value. 
  -->

  <tdml:parserTestCase name="totalDigits01" root="tD_e1"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>4.22</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <tD_e1>4.22</tD_e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits02
    Schema: totalDigitsSchema 
    Purpose: This test should fail because the number of digits does not adhere to the totalDigits facet value. 
  -->

  <tdml:parserTestCase name="totalDigits02" root="tD_e1"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>4.224</tdml:document>
      <tdml:errors>
        <tdml:error>Assertion</tdml:error>
        <tdml:error>failed</tdml:error>
        <tdml:error>dfdl:checkConstraints</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits03
    Schema: totalDigitsSchema 
    Purpose: This test should fail because the value of totalDigits is negative and therefore not valid. 
  -->

  <tdml:parserTestCase name="totalDigits03" root="tD_e2"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>4.224</tdml:document>
      <tdml:errors>
        <tdml:error>Schema Definition Error</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits04
    Schema: totalDigitsSchema 
    Purpose: This test should fail because the value of totalDigits is not an integer and therefore not valid. 
  -->

  <tdml:parserTestCase name="totalDigits04" root="tD_e3"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>4.224</tdml:document>
      <tdml:errors>
        <tdml:error>Schema Definition Error</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits05
    Schema: totalDigitsSchema 
    Purpose: This test should pass because the number of digits in the integer
             matches the number of digits in the document
  -->

  <tdml:parserTestCase name="totalDigits05" root="tD_e4"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>15</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <tD_e4>15</tD_e4>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits05b
    Schema: totalDigitsSchema 
    Purpose: This test should pass because the number of digits in the integer
             matches the number of digits in the document
  -->

  <tdml:parserTestCase name="totalDigits05b" root="tD_e4b"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>15</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <tD_e4b>15</tD_e4b>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: totalDigits06
    Schema: totalDigitsSchema 
    Purpose: This test should fail because the number of digits in the integer
             does not match the number of digits in the document
  -->

  <tdml:parserTestCase name="totalDigits06" root="tD_e4"
    model="totalDigitsSchema" description="Section 5 - Facets - totalDigits - DFDL-5-056R">
    <tdml:document>155</tdml:document>
      <tdml:errors>
        <tdml:error>Assertion</tdml:error>
        <tdml:error>failed</tdml:error>
      <tdml:error>dfdl:checkConstraints</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <tdml:defineSchema name="fractionDigitsSchema">
    <dfdl:format ref="ex:daffodilTest1" />

    <xs:simpleType name="fD_st1">
      <xs:restriction base="xs:decimal">
        <xs:fractionDigits value="3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="fD_e1" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:fD_st1">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:simpleType name="fD_st2">
      <xs:restriction base="xs:decimal">
        <xs:fractionDigits value="3" />
        <xs:totalDigits value="2" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="fD_e2" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:fD_st2">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:simpleType name="fD_st3">
      <xs:restriction base="xs:decimal">
        <xs:fractionDigits value="3" />
        <xs:totalDigits value="4" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="fD_e3" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:fD_st3">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
<!--    
    <xs:simpleType name="fD_st4">
      <xs:restriction>
        <xs:fractionDigits value="-3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="fD_e4" type="xs:float" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:fD_st4">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    
    <xs:simpleType name="fD_st5">
      <xs:restriction>
        <xs:fractionDigits value=".3" />
      </xs:restriction>
    </xs:simpleType>
    
    <xs:element name="fD_e5" type="xs:float" dfdl:lengthKind="delimited">
      <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/dfdl-1.0/">
          <dfdl:assert test="{ dfdl:checkConstraints(.) }"
            message="Assertion failed for dfdl:checkConstraints(.)" />
        </xs:appinfo>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ex:fD_st5">
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
-->
  </tdml:defineSchema>
  
  <!--
    Test name: fractionDigitsPass
    Schema: fractionDigitsSchema 
    Purpose: This test should pass because the number of fraction digits adheres to the fractionDigits facet value. 
  -->

  <tdml:parserTestCase name="fractionDigitsPass" root="fD_e1"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.224</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <fD_e1>4.224</fD_e1>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionDigitsFail
    Schema: fractionDigitsSchema 
    Purpose: This test should fail because the number of fraction digits does not
             adhere to the fractionDigits facet value. 
  -->

  <tdml:parserTestCase name="fractionDigitsFail" root="fD_e1"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.22466</tdml:document>
      <tdml:errors>
        <tdml:error>Assertion</tdml:error>
        <tdml:error>failed</tdml:error>
        <tdml:error>dfdl:checkConstraints</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionDigitsFailNeg
    Schema: fractionDigitsSchema 
    Purpose: This test should fail because the value of fractionDigits is negative.
  -->

  <tdml:parserTestCase name="fractionDigitsFailNeg" root="fD_e4"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.22466</tdml:document>
      <tdml:errors>
        <tdml:error>Schema Definition Error</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionTotalDigitsFail
       Schema: fractionDigitsSchema 
      Purpose: This test should fail because the value of fractionDigits is more than
               the value of totalDigits
  -->

  <tdml:parserTestCase name="fractionTotalDigitsFail" root="fD_e2"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.22466</tdml:document>
      <tdml:errors>
        <tdml:error>Schema Definition Error</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionTotalDigitsPass
       Schema: fractionDigitsSchema 
      Purpose: This test should pass because the document matches the specified number of 
               fractionDigits and totalDigits
  -->

  <tdml:parserTestCase name="fractionTotalDigitsPass" root="fD_e3"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.224</tdml:document>
    <tdml:infoset>
      <tdml:dfdlInfoset>
        <fD_e3>4.224</fD_e3>
      </tdml:dfdlInfoset>
    </tdml:infoset>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionTotalDigitsFail2
       Schema: fractionDigitsSchema 
      Purpose: This test should fail because the document matches the specified number of 
               fractionDigits but not totalDigits
  -->

  <tdml:parserTestCase name="fractionTotalDigitsFail2" root="fD_e3"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>45.224</tdml:document>
      <tdml:errors>
        <tdml:error>Assertion</tdml:error>
        <tdml:error>failed</tdml:error>
        <tdml:error>dfdl:checkConstraints</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionTotalDigitsFail3
       Schema: fractionDigitsSchema 
      Purpose: This test should fail because the document matches the specified number of 
               totalDigits but not fractionDigits
  -->

  <tdml:parserTestCase name="fractionTotalDigitsFail3" root="fD_e3"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>45.22</tdml:document>
      <tdml:errors>
        <tdml:error>Assertion</tdml:error>
        <tdml:error>failed</tdml:error>
        <tdml:error>dfdl:checkConstraints</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
  <!--
    Test name: fractionDigitsFailNotInt
    Schema: fractionDigitsSchema 
    Purpose: This test should fail because the value of fractionDigits is not an integer.
  -->

  <tdml:parserTestCase name="fractionDigitsFailNotInt" root="fD_e5"
    model="fractionDigitsSchema" description="Section 5 - Facets - fractionDigits - DFDL-5-056R">
    <tdml:document>4.22466</tdml:document>
      <tdml:errors>
        <tdml:error>Schema Definition Error</tdml:error>
      </tdml:errors>
  </tdml:parserTestCase>
  
</tdml:testSuite>
