<?xml version="1.0" encoding="UTF-8"?>
<tdml:testSuite suiteName="lengthKindPattern" description="Section 12 - lengthKind=pattern"
                xmlns:tdml="http://www.ibm.com/xmlns/dfdl/testData"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:ct="http://w3.ibm.com/xmlns/dfdl/ctInfoset"
                xmlns:ex="http://example.com"
                xsi:schemaLocation="http://www.ibm.com/xmlns/dfdl/testData /xsd/tdml.xsd">

    <tdml:defineSchema name="DFDL-222-Embedded.dfdl.xsd">

        <dfdl:format representation="text" lengthUnits="bytes" encoding="US-ASCII"
                     byteOrder='bigEndian'
                     ignoreCase='no' initiatedContent='no'
                     lengthKind='implicit'
                     occursCountKind='parsed'
                     separatorPolicy='suppressed' separatorPosition='infix'
                     textNumberRep='standard'
                     initiator="" terminator="" separator=""
                />

        <xs:element name="def" dfdl:lengthkind="pattern" dfdl:lengthPattern="!!.*!!" dfdl:encoding="utf-8">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="first" type="xs:string" dfdl:lengthKind="explicit" dfdl:length="{2}"/>
                    <xs:element name="inner" type="xs:int"
                                dfdl:represenation="binary"
                                dfdl:binaryNumberRep="binary"
                                dfdl:lengthKind="implicit"/>
                    <xs:element name="last" type="xs:string" dfdl:lengthKind="explicit" dfdl:length="{2}"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </tdml:defineSchema>

    <tdml:parserTestCase name="LengthPatternIllegalBits" root="def"
                         model="DFDL-222-Embedded.dfdl.xsd" description="Section 12 lengthKind-pattern - DFDL-12-038R">
        <tdml:document>!!c2c2!!</tdml:document>
        <tdml:infoset>
            <tdml:dfdlInfoset xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <first>!!</first>
                <inner>49858</inner>
                <last>!!</last>
            </tdml:dfdlInfoset>
        </tdml:infoset>
    </tdml:parserTestCase>

</tdml:testSuite>